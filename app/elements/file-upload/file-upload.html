<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../a-button/a-button.html">

<dom-module id="file-upload">
  <template>
  <style>



    #file {
/*            width: 200px;
      height: 200px;*/
/*      @apply(--layout-fit);*/
      position: absolute;
      width: 200px;
      height: 200px;   
      margin: 0px;
      opacity: 0;
      z-index: 9999;
 
    }



  #file:hover {
  cursor: pointer;

    }
  </style>
<link rel="stylesheet" href="file-upload.css">
      

      <input type="file" name="File" id="file" on-change="setFiles" capture="camera" accept="image/*" >

<!--       Button is gecentreerd! Nu nog juiste functie meegeven? -->
      <a-button icon="{{icon}}"></a-button>
      


  </template>
  </dom-module>
  <script>
    (function () {
      'use strict';

      function openCam(){
        var fileDialog = document.getElementById("file");
        console.log(fileDialog);
        fileDialog.click();
      }

      var imgval;

      Polymer({

        is: 'file-upload',

        properties: {
          imgval: {
            type: String,
            notify: true,
            observer: 'testObs'
        }

        },

    

        startFile: function(){
          openCam();
        },



/*testfunctie van Bennisan, wegsmijte die hap */
    Doetiehet: function() {
      console.log('Nou!!!!!!!!!!!!!!!!!!!!!!');
    },





        ready: function(){
          this.imgval = '';
          this.icon = '../../images/icon-img.svg';
        },

        testObs: function(){
          console.log('imgval: ',this.imgval);
        },

        setFiles: function(){
          //console.log('Set files started');
          this.fileInput = this.$.file.files[0];
          //this.imageType = /image.*/;
          var that = this;
          // if (this.fileInput.type.match(this.imageType)) {
          //console.log('das godver een goeie image jong');
          var reader = new FileReader();
          //console.log('reader: ', reader);
          reader.onload = function(e) {
          //console.log(reader.result);]
            //console.log('de reader wordt uitgevoerd');
            that.imgval = reader.result;
            that.icon = that.imgval;

            //console.log(that.imgval);
          }

          reader.readAsDataURL(this.fileInput);
                    // }

        }
        
      });

    })();
  </script>

