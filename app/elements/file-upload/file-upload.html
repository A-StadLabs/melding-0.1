<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../a-button/a-button.html">

<dom-module id="file-upload">
  <template>
  <style>
    #file {
      opacity: 0;
    }

    a-button {
      position: fixed;
      top: 0;
    }

    input {
      position: fixed;
      top: 0;
      width: 200px;
      height: 200px;
    }

  </style>
<link rel="stylesheet" href="file-upload.css">
      
      <a-button icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjIxMCIgaGVpZ2h0PSIxNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiA8IS0tIENyZWF0ZWQgd2l0aCBNZXRob2QgRHJhdyAtIGh0dHA6Ly9naXRodWIuY29tL2R1b3BpeGVsL01ldGhvZC1EcmF3LyAtLT4KIDxnPgogIDx0aXRsZT5iYWNrZ3JvdW5kPC90aXRsZT4KICA8cmVjdCBmaWxsPSJub25lIiBpZD0iY2FudmFzX2JhY2tncm91bmQiIGhlaWdodD0iMTUwIiB3aWR0aD0iMjEyIiB5PSItMSIgeD0iLTEiLz4KICA8ZyBkaXNwbGF5PSJub25lIiBvdmVyZmxvdz0idmlzaWJsZSIgeT0iMCIgeD0iMCIgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSIgaWQ9ImNhbnZhc0dyaWQiPgogICA8cmVjdCBmaWxsPSJ1cmwoI2dyaWRwYXR0ZXJuKSIgc3Ryb2tlLXdpZHRoPSIwIiB5PSIwIiB4PSIwIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIi8+CiAgPC9nPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGQ9Im03LjA2MjY0NCwxMC44NTIxMTJjMCwxIDAsOCAwLDE3YzAsMTEgMCwxNiAwLDIyYzAsNCAwLDYgMCw5YzAsNSAwLDggMCwxMmMwLDMgLTEuNjE3MDIsNi43NDcwNyAtMywxMWMtMS44ODEwNTgsNS43ODQ2MDcgLTIuNDkzNDU0LDguODc4NTU1IC0zLDEyYy0wLjY0MDczMiwzLjk0ODM0OSAtMC4yOTE0MjgsMTEuMDQxODQgMSwxOWMwLjgxNjc3Miw1LjAzMzE3MyAzLjE2Nzk2OSw5LjkyMDMzNCA1LDE0YzIuMjA2MDY5LDQuOTEyNTY3IDEuNTE5NDU1LDkuMDM4NzQyIDIsMTJjMC41MDY1NDYsMy4xMjE0NDUgMSw2IDEsN2MwLDEgMSwxIDIsMWMxLDAgNC4wNzg0MywwLjIxMDE0NCA3LC0xYzQuMTMxNzE0LC0xLjcxMTQxMSA3Ljk4NDUyOCwtNC4wODA3NSAxMywtNWM1Ljk4MzA5MywtMS4wOTY2MDMgMTAuNTI4MTUyLC0zLjk4NTMzNiAxNiwtNmM1LjcwODE0NSwtMi4xMDE2NjkgMTEuOTE1NzI2LC0zLjQyNjQ4MyAyMSwtNWM3Ljk0Mzk3LC0xLjM3NjAwNyAxNy4wMDU0NzgsLTEuOTYyMzg3IDI0LC0zYzEzLjAxMDU1OSwtMS45MzAwODQgMjEuOTk0NjQ0LC0zLjA0OTQ2OSAzMSwtNGM5Ljk5NDM0NywtMS4wNTQ5MzIgMTUuNjkxNDYsLTIuODU4NjI3IDIyLjk5OTk5MiwtNWM1LjgzNzM3MiwtMS43MTAzMjcgMTMuOTA3Nzc2LC0yLjQ5NjIzMSAxOCwtM2MyLjk3NzUwOSwtMC4zNjY1NDcgNi4wNTE2MzYsLTAuMzU5MjY4IDEwLC0xYzMuMTIxNDI5LC0wLjUwNjU0NiA1LjE3MTYzMSwwLjE1OTEzNCA5LC0xYzMuNDUwODM2LC0xLjA0NDgzIDcsLTIgMTEsLTJjNCwwIDYuMDgwMjYxLC0wLjMxMDc0NSA5LC0xYzIuMTc2MjM5LC0wLjUxMzc0OCAzLC0xIDQsLTFjMSwwIDEsLTEgMSwtMmMwLC0zIC0xLjI5NTQ3MSwtOC44ODY4MjYgLTUsLTE5Yy0zLjI2MzA2MiwtOC45MDc5OSAtNS41MzM3NTIsLTE2LjA5NjYwMyAtNywtMjJjLTAuNzYyMjY4LC0zLjA2OTAzMSAtMiwtNiAtMiwtOWMwLC0zIDAsLTUgMCwtN2MwLC0xIDAuMzgyNjksLTIuMDc2MTI2IDAsLTNjLTAuNTQxMTk5LC0xLjMwNjU2NCAtMC42Nzk2MjYsLTMuMDI1ODE4IC0xLC01Yy0wLjUwNjUzMSwtMy4xMjE0NDUgLTEuNDk2MjE2LC01LjkwNzc5MSAtMiwtMTBjLTAuMzY2NTQ3LC0yLjk3NzUyNCAwLC02IDAsLTljMCwtNSAwLC04IDAsLTEwYzAsLTEgMC43MDcwOTIsLTIuMjkyODkyIDAsLTNjLTAuNzA3MDkyLC0wLjcwNzEwOCAtMS45MjU3ODEsLTAuNDk3NTUxIC03LC0xYy03Ljk2MTA2LC0wLjc4ODMgLTIwLDAgLTM3LDBjLTIwLjk5OTk5MiwwIC0zOS43ODkxMzEsMi44OTY4MTIgLTU0Ljk5OTk5Miw2Yy0xMy44NTY3MiwyLjgyNjkyNyAtMjEuMDg3NDAyLDIuMzk4MjYyIC0zMCw0Yy04LjExNjE4LDEuNDU4NjExIC0xNC4wNzE3OTMsMi42OTEyMzggLTE5LDRjLTMuMDU2MzM1LDAuODExNjYxIC03LDEgLTEzLDFjLTQsMCAtNywwIC0xMiwwYy0yLDAgLTQsMCAtNiwwYy0yLDAgLTMuNjkzNDM2LC0xLjQ1ODgwMSAtNSwtMmMtMC45MjM4NzQsLTAuMzgyNjkgLTIsLTEgLTIsLTFjLTEsMCAtMSwtMiAtMiwtMmwwLDBsLTEsMCIgaWQ9InN2Z18xIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPHBhdGggZD0ibTk4LjA2MjY0NSw0NS44NTIxMTJjLTEsMCAtMSwxIC0xLDJjMCwxIDAsNCAwLDljMCw0IC0wLjkxOTAwNiw5LjEwNzAxIDAsMTNjMC41MTM3NDgsMi4xNzYyNTQgMSwzIDEsNGMwLDEgLTAuMjI5NzUyLDIuMDI2NzQ5IDAsM2MwLjUxMzc0OCwyLjE3NjI1NCAyLjcwNTQ2LDMuMzQ2MTkxIDUsNWMzLjYyNzk5MSwyLjYxNDg5OSA3LjIyOTM1NSw0LjMzMTk4NSAxMSw2YzMuMjk3MzMzLDEuNDU4NjMzIDcuMDUxNjUxLDIuMzU5MjY4IDExLDNjMy4xMjE0MjIsMC41MDY1NDYgNC44Nzg1NjMsMS40OTM0NTQgNy45OTk5OTIsMmMxLjk3NDE4MiwwLjMyMDM1OCA1LDAgNywwYzMsMCA1LjE1MjI1MiwwLjc2NTM2NiA3LDBjMi42MTMxMjksLTEuMDgyMzk3IDUsLTQgOCwtNmMzLC0yIDQuNjkyNTM1LC01LjE4NjAwNSA2LC03YzEuNjUzODA5LC0yLjI5NDU0IDIuNjkyNTM1LC00LjE4NjAwNSA0LC02YzAuODI2OTA0LC0xLjE0NzI2MyAxLC0zIDEsLTVjMCwtMyAwLjY4OTI3LC02LjA4MDI0NiAwLC05Yy0wLjUxMzczMywtMi4xNzYyNTQgLTIuNzU1MzEsLTUuMTMyMDA0IC01LC05Yy0xLjgwOTcyMywtMy4xMTg0ODQgLTQuMTMyMDE5LC01Ljc1NTMxIC04LC04Yy0zLjExODQ2OSwtMS44MDk3MjMgLTQuODY4Mjg2LC00LjI4ODU4OSAtOSwtNmMtMi45MjE1NywtMS4yMTAxNDQgLTYuMDgwMjYxLC0yLjMxMDc0NSAtOSwtM2MtNC4zNTI1MDksLTEuMDI3NDgxIC03LC0zIC05Ljk5OTk5MiwtNGMtMywtMSAtNCwtMSAtNSwtMWMtMSwwIC0yLjExMjc0NywtMC42NjIwMTggLTQsMGMtNi4wNDIxNzUsMi4xMTk0NzYgLTksNyAtMTYsMTFsLTQsM2wtMywzbC0xLDAiIGlkPSJzdmdfMiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Im0yMC4wNjI2NDUsMzkuODUyMTEyYzEsMCA0LjAyNTgxOCwwLjMyMDM1OCA2LDBjMy4xMjE0NDUsLTAuNTA2NTQ2IDUuMDM4NzQyLC0wLjUxOTQ1NSA4LC0xYzMuMTIxNDQ1LC0wLjUwNjU0NiA0LC0xIDYsLTFjMiwwIDMsMCA1LDBjMSwwIDIsMCAzLDBjMSwwIDIsMCAzLDBjMSwwIDEsMCAxLDFjMCwwIDAsMSAwLDJjMCwxIDAsMiAwLDNjMCwxIDAsMiAwLDJjMCwxIDAsMiAwLDNjMCwxIDAsMiAwLDJjLTEsMCAtMS44MjM3NDYsMC40ODYyNTIgLTQsMWMtMS45NDY1MDMsMC40NTk1MDMgLTQuMTg2MDA1LDAuNjkyNTUxIC02LDJjLTEuMTQ3MjYzLDAuODI2OTA0IC0yLDEgLTMsMmMtMSwxIC0zLjkwNzc5MSwxLjQ5NjIzMSAtOCwyYy0yLjk3NzUyNCwwLjM2NjU0NyAtNywxIC04LDFjLTMsMCAtMywwIC00LDBjLTEsMCAtMS40NTg4MDEsLTAuNjkzNDM2IC0yLC0yYy0wLjM4MjY5LC0wLjkyMzg3NCAwLjcwNzEwOCwtMi4yOTI4OTIgMCwtM2MtMC43MDcxMDgsLTAuNzA3MTA4IC0xLC0xIC0xLC0yYzAsMCAwLC0xIDAsLTJjMCwtMiAwLC0zIDAsLTRjMCwtMSAwLC0yIDAsLTNjMCwwIDAsLTEgMCwtMmMwLC0xIDAuMjkyODkyLC0yLjI5Mjg5MiAxLC0zYzAuNzA3MTA4LC0wLjcwNzEwOCAyLDAgMywwbDAsMGwxLDBsMSwwIiBpZD0ic3ZnXzMiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJtMTA4LjA2MjY0NSw5Ljg1MjExMmMxLDAgMiwwIDQsMGMyLDAgMi4yOTI4OTIsLTAuMjkyODkyIDMsLTFjMC43MDcxMDgsLTAuNzA3MTA4IDEuMjkyODkyLC0xLjI5Mjg5MiAyLC0yYzAuNzA3MTA4LC0wLjcwNzEwOCA0LjA3ODQzLC0xLjc4OTg0OCA3LC0zYzIuMDY1ODU3LC0wLjg1NTcwNSA0Ljk5OTk5MiwtMyA2Ljk5OTk5MiwtM2MxLDAgMiwwIDMsMGMxLDAgMiwwIDMsMGMxLDAgMi4wMjY3NjQsLTAuMjI5NzUyIDMsMGMyLjE3NjIzOSwwLjUxMzc0MSAyLjY5MzQ1MSwxLjQ1ODgwMSA0LDJjMC45MjM4ODksMC4zODI2ODMgMSwxIDIsMWwxLDEiIGlkPSJzdmdfNCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Im0xNy4wNjI2NDUsMTAyLjg1MjExMmMwLDEgMCwzIDAsNGMwLDEgMCwzIDAsNWMwLDEgMCwyIDAsM2MwLDEgMCwyIDAsM2MwLDIgMCwzIDAsNGMwLDEgMCwyIDAsM2wwLDEiIGlkPSJzdmdfNSIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Im0zMi4wNjI2NDUsMTI0Ljg1MjExMmMwLC0xIDAsLTMgMCwtNGMwLC0xIDAsLTIgMCwtNGMwLC0xIDAsLTIgMCwtM2MwLC0xIDAsLTIgMCwtM2MwLC0zIDAsLTYgMCwtOGMwLC0zIDAsLTUgMCwtNmwwLDAiIGlkPSJzdmdfNiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Im00OC4wNjI2NDUsMTIxLjg1MjExMmMwLC0xIDAsLTMgMCwtNGMwLC0xIDAsLTIgMCwtM2MwLC0xIDAsLTIgMCwtM2MwLC0xIDAsLTIgMCwtNGMwLC0zIDAsLTUgMCwtNmMwLC0xIDAsLTIgMCwtM2wwLC0xbDAsLTFsMCwtMSIgaWQ9InN2Z183IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPHBhdGggZD0ibTE0OS4wNjI2MzcsNDguODUyMTEyYzAsMSAwLjI5MjkwOCwxLjI5Mjg5MiAxLDJjMC43MDcwOTIsMC43MDcxMDggMS4yOTI5MDgsMC4yOTI4OTIgMiwxYzAuNzA3MDkyLDAuNzA3MTA4IDAuNjE3MzEsMi4wNzYxMjYgMSwzYzAuNTQxMTk5LDEuMzA2NTY0IDEsMiAxLDNjMCwxIDEsMSAxLDJjMCwxIDAsMiAwLDNjMCwxIDAsMiAwLDNjMCwxIDAsMiAwLDNjMCwxIDAsMiAwLDNjMCwwIC0xLDAgLTEsMWMwLDEgLTAuMjkyOTA4LDEuMjkyODkyIC0xLDJjLTAuNzA3MDkyLDAuNzA3MTA4IC0xLjI5MjkwOCwwLjI5Mjg5MiAtMiwxYy0xLjQxNDIxNSwxLjQxNDIxNSAtMC42MTczMSwyLjA3NjEyNiAtMSwzYy0wLjU0MTE5OSwxLjMwNjU2NCAtMS42OTM0NTEsMS40NTg4MDEgLTMsMmMtMC45MjM4ODksMC4zODI2OSAtMSwxIC0yLDFjLTEsMCAtMiwwIC00LDBjLTEsMCAtNCwwIC01LDBjLTMsMCAtNCwwIC01LDBjMCwwIC0xLDAgLTIsMGMtMSwwIC0xLjk5OTk5MiwwIC0xLjk5OTk5MiwwbC0xLDAiIGlkPSJzdmdfOCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iIzAwMCIgZmlsbD0ibm9uZSIvPgogPC9nPgo8L3N2Zz4=">UP!</a-button>

      <input type="file" name="File" id="file" on-change="setFiles" capture="camera" accept="image/*">
  </template>
  </dom-module>
  <script>
    (function () {
      'use strict';

      function openCam(){
        var fileDialog = document.getElementById("file");
        console.log(fileDialog);
        fileDialog.click();
      }

      var imgval;

      Polymer({

        is: 'file-upload',

        properties: {
          imgval: {
            type: String,
            notify: true,
            observer: 'testObs'
        }

        },

        startFile: function(){
          openCam();
        },

        ready: function(){
          this.imgval = '';
        },

        testObs: function(){
          console.log('imgval: ',this.imgval);
        },

        setFiles: function(){
          //console.log('Set files started');
          this.fileInput = this.$.file.files[0];
          //this.imageType = /image.*/;
          var that = this;
          // if (this.fileInput.type.match(this.imageType)) {
          //console.log('das godver een goeie image jong');
          var reader = new FileReader();
          //console.log('reader: ', reader);
          reader.onload = function(e) {
          //console.log(reader.result);]
            //console.log('de reader wordt uitgevoerd');
            that.imgval = reader.result;
            //console.log(that.imgval);
          }

          reader.readAsDataURL(this.fileInput);
                    // }

        }
        
      });

    })();
  </script>

